<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CryptoAnalyst Pro - –ê–Ω–∞–ª–∏–∑ –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üìà</text></svg>">
</head>
\1
{%include '_lang_header.html'%}

    <div class="container">
        <header class="crypto-header">
            <div class="header-content">
                <div class="logo-container">
                    <a href="/" class="logo-link">
                        <div class="logo">
                            <i class="fas fa-chart-line"></i>
                        </div>
                        <div class="logo-text">
                            <h1 class="logo-title">CryptoAnalyst Pro</h1>
                            <div class="logo-subtitle">Advanced Market Insights</div>
                        </div>
                    </a>
                </div>

                <div class="header-nav">
                    <a href="https://www.bybit.com/invite?ref=PQ1JPW" target="_blank" class="nav-item">
                        <div class="nav-icon">
                            <i class="fas fa-rocket"></i>
                        </div>
                        <span class="nav-text">Bybit</span>
                    </a>

                    <a href="https://www.donationalerts.com/r/deimex" target="_blank" class="nav-item">
                        <div class="nav-icon">
                            <i class="fas fa-donate"></i>
                        </div>
                        <span class="nav-text">–ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å</span>
                    </a>

                    <div class="nav-item" id="theme-toggle">
                        <div class="nav-icon">
                            <i class="fas fa-moon"></i>
                        </div>
                        <span class="nav-text">–¢–µ–º–∞</span>
                    </div>
                </div>
            </div>
        </header>

        <main>
            <!-- Hero Section -->
            <section class="hero-section">
                <div class="hero-content">
                    <h2>–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç</h2>
                    <p>–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑, —Ç–æ—Ä–≥–æ–≤—ã–µ —Å–∏–≥–Ω–∞–ª—ã –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏</p>
                </div>
            </section>

            <!-- Symbol Selection Section -->
            <section class="selection-section">
                <div class="selection-card">
                    <h3><i class="fas fa-search"></i> –í—ã–±–æ—Ä –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç—ã –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞</h3>
                    <form id="analysis-form" action="/analyze" method="post">
                        <div class="form-group">
                            <label for="symbol">
                                <i class="fas fa-coins"></i> –ö—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–∞:
                            </label>
                            <select name="symbol" id="symbol" required>
                                <option value="">-- –í—ã–±–µ—Ä–∏—Ç–µ —Ç–æ—Ä–≥–æ–≤—É—é –ø–∞—Ä—É --</option>
                                {%for symbol in symbols%}
                                <option value="{{symbol}}">{{symbol}}</option>
                                {%endfor%}
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="timeframe">
                                <i class="fas fa-clock"></i> –¢–∞–π–º—Ñ—Ä–µ–π–º:
                            </label>
                            <select name="timeframe" id="timeframe">
                                <option value="1">1 –º–∏–Ω—É—Ç–∞</option>
                                <option value="5">5 –º–∏–Ω—É—Ç</option>
                                <option value="15">15 –º–∏–Ω—É—Ç</option>
                                <option value="30">30 –º–∏–Ω—É—Ç</option>
                                <option value="60" selected>1 —á–∞—Å</option>
                                <option value="240">4 —á–∞—Å–∞</option>
                                <option value="D">1 –¥–µ–Ω—å</option>
                                <option value="W">1 –Ω–µ–¥–µ–ª—è</option>
                                <option value="M">1 –º–µ—Å—è—Ü</option>
                            </select>
                        </div>

                        <button type="submit" class="analyze-btn" id="analyze-button">
                            <i class="fas fa-chart-line"></i> –ó–∞–ø—É—Å—Ç–∏—Ç—å –∞–Ω–∞–ª–∏–∑
                        </button>
                    </form>
                </div>
            </section>

            <!-- Quick Actions -->
            <section class="quick-actions-section">
                <h3><i class="fas fa-bolt"></i> –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</h3>
                <div class="action-buttons">
                    <a href="/patterns" class="action-btn">
                        <i class="fas fa-book"></i> –®–ø–∞—Ä–≥–∞–ª–∫–∞ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤
                    </a>
                    <button class="action-btn" id="refresh-top-cryptos">
                        <i class="fas fa-sync-alt"></i> –û–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ
                    </button>
                    <button class="action-btn" id="easter-egg-btn">
                        <i class="fas fa-key"></i> –°–µ–∫—Ä–µ—Ç–Ω—ã–µ —Ñ–∏—à–∫–∏
                    </button>
                </div>
            </section>

            <!-- Live Crypto Dashboard -->
            <section class="dashboard-section">
                <div class="section-header">
                    <h3><i class="fas fa-fire"></i> –¢–æ–ø –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç—ã –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏</h3>
                    <div class="last-update" id="last-update">
                        <i class="fas fa-clock"></i> –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ: <span id="update-time">–ó–∞–≥—Ä—É–∑–∫–∞...</span>
                    </div>
                </div>

                <div class="dashboard-content">
                    <div class="crypto-grid" id="crypto-dashboard">
                        <div class="loading-state">
                            <div class="loading-spinner"></div>
                            <p>–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö —Å –±–∏—Ä–∂–∏ Bybit...</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Popular Cryptos Grid -->
            <section class="popular-cryptos-section">
                <h3><i class="fas fa-star"></i> –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ç–æ—Ä–≥–æ–≤—ã–µ –ø–∞—Ä—ã</h3>
                <div class="popular-grid">
                    {%for symbol in ['BTCUSDT', 'ETHUSDT', 'BNBUSDT', 'SOLUSDT', 'XRPUSDT', 'ADAUSDT', 'DOGEUSDT', 'MATICUSDT']%}
                    <div class="popular-crypto-card">
                        <div class="crypto-icon">
                            <i class="fas fa-coins"></i>
                        </div>
                        <div class="crypto-info">
                            <h4>{{symbol}}</h4>
                            <a href="/analyze?symbol={{symbol}}&timeframe=60" class="quick-analysis-link">
                                <i class="fas fa-chart-bar"></i> –ë—ã—Å—Ç—Ä—ã–π –∞–Ω–∞–ª–∏–∑
                            </a>
                        </div>
                    </div>
                    {%endfor%}
                </div>
            </section>

            <!-- Features Section -->
            <section class="features-section">
                <h3><i class="fas fa-gem"></i> –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã</h3>
                <div class="features-grid">
                    <div class="feature-card">
                        <i class="fas fa-chart-line"></i>
                        <h4>–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑</h4>
                        <p>RSI, MACD, Bollinger Bands, Stochastic –∏ –¥—Ä—É–≥–∏–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã</p>
                    </div>
                    <div class="feature-card">
                        <i class="fas fa-shapes"></i>
                        <h4>–ì—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã</h4>
                        <p>–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ —Ü–µ–Ω–æ–≤—ã—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤</p>
                    </div>
                    <div class="feature-card">
                        <i class="fas fa-bolt"></i>
                        <h4>Real-time –¥–∞–Ω–Ω—ã–µ</h4>
                        <p>–ê–∫—Ç—É–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Å –±–∏—Ä–∂–∏ Bybit –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥</p>
                    </div>
                    <div class="feature-card">
                        <i class="fas fa-brain"></i>
                        <h4>–¢–æ—Ä–≥–æ–≤—ã–µ —Å–∏–≥–Ω–∞–ª—ã</h4>
                        <p>–ß–µ—Ç–∫–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏: –ü–û–ö–£–ü–ê–¢–¨/–ü–†–û–î–ê–í–ê–¢–¨/–ù–ï–ô–¢–†–ê–õ–¨–ù–û</p>
                    </div>
                </div>
            </section>
        </main>

        <footer class="main-footer">
            <div class="footer-content">
                <p>&copy; 2025 CryptoAnalyst Pro | –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞</p>
                <p class="disclaimer">
                    <i class="fas fa-exclamation-triangle"></i>
                    –î–ª—è –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö —Ü–µ–ª–µ–π. –¢–æ—Ä–≥—É–π—Ç–µ –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ, –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç—ã - –≤—ã—Å–æ–∫–æ—Ä–∏—Å–∫–æ–≤—ã–µ –∞–∫—Ç–∏–≤—ã.
                </p>
            </div>
        </footer>
    </div>

    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ DOM
        document.addEventListener('DOMContentLoaded', function() {
            // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö —Å —Å–µ—Ä–≤–µ—Ä–∞
            loadTopCryptosFromServer();

            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç–µ–º–æ–π
            initTheme();

            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–∏—Å–∫–∞
            setupSymbolSearch();
        });

        // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö —Å —Å–µ—Ä–≤–µ—Ä–∞
        async function loadTopCryptosFromServer() {
            try {
                const response = await fetch('/api/top-cryptos');
                if (response.ok) {
                    const data = await response.json();
                    if (data.success) {
                        renderCryptoDashboard(data.cryptos);
                        updateLastUpdateTime();
                    }
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö:', error);
            }
        }

        // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–∞—à–±–æ—Ä–¥–∞ —Å –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–∞–º–∏
        function renderCryptoDashboard(cryptos) {
            const dashboard = document.getElementById('crypto-dashboard');
            if (!dashboard) return;

            if (!cryptos || cryptos.length === 0) {
                dashboard.innerHTML = '<div class="empty-state">–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è</div>';
                return;
            }

            dashboard.innerHTML = cryptos.map((crypto, index) => `
                <div class="crypto-card" data-symbol="${crypto.symbol}">
                    <div class="crypto-header">
                        <i class="${getCryptoIcon(crypto.symbol)}"></i>
                        <h4>${crypto.symbol.replace('USDT', '')}</h4>
                    </div>
                    <div class="crypto-price ${crypto.price_change >= 0 ? 'price-up' : 'price-down'}">
                        $${formatPrice(crypto.price)}
                    </div>
                    <div class="crypto-change ${crypto.price_change >= 0 ? 'change-up' : 'change-down'}">
                        <i class="fas ${crypto.price_change >= 0 ? 'fa-arrow-up' : 'fa-arrow-down'}"></i>
                        ${Math.abs(crypto.price_change).toFixed(2)}%
                    </div>
                    <a href="/analyze?symbol=${crypto.symbol}" class="btn btn-primary">
                        <i class="fas fa-chart-bar"></i> –ê–Ω–∞–ª–∏–∑
                    </a>
                </div>
            `).join('');
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–∫–æ–Ω–∫–∏ –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç—ã
        function getCryptoIcon(symbol) {
            const iconMap = {
                'BTCUSDT': 'fab fa-bitcoin',
                'ETHUSDT': 'fab fa-ethereum',
                'BNBUSDT': 'fas fa-coins',
                'SOLUSDT': 'fas fa-sun',
                'XRPUSDT': 'fas fa-bolt',
                'ADAUSDT': 'fas fa-chart-line',
                'DOGEUSDT': 'fas fa-dog',
                'MATICUSDT': 'fas fa-shapes',
                'DOTUSDT': 'fas fa-circle',
                'LTCUSDT': 'fas fa-money-bill-wave'
            };
            return iconMap[symbol] || 'fas fa-coins';
        }

        // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ü–µ–Ω—ã
        function formatPrice(price) {
            if (price >= 1000) return price.toFixed(0);
            if (price >= 1) return price.toFixed(2);
            if (price >= 0.01) return price.toFixed(4);
            return price.toFixed(6);
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
        function updateLastUpdateTime() {
            const updateElement = document.getElementById('update-time');
            if (updateElement) {
                updateElement.textContent = new Date().toLocaleTimeString();
            }
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ–º—ã
        function initTheme() {
            const themeToggle = document.getElementById('theme-toggle');
            if (themeToggle) {
                themeToggle.addEventListener('click', toggleTheme);
            }

            // –ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–æ–π —Ç–µ–º—ã
            const savedTheme = localStorage.getItem('cryptoanalyst_theme') || 'dark';
            document.documentElement.setAttribute('data-theme', savedTheme);
            updateThemeIcon(savedTheme);
        }

        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ç–µ–º—ã
        function toggleTheme() {
            const currentTheme = document.documentElement.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';

            document.documentElement.setAttribute('data-theme', newTheme);
            localStorage.setItem('cryptoanalyst_theme', newTheme);
            updateThemeIcon(newTheme);
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∫–æ–Ω–∫–∏ —Ç–µ–º—ã
        function updateThemeIcon(theme) {
            const themeIcon = document.querySelector('#theme-toggle i');
            if (themeIcon) {
                themeIcon.className = theme === 'dark' ? 'fas fa-sun' : 'fas fa-moon';
            }
        }

        // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–∏—Å–∫–∞ –ø–æ —Å–∏–º–≤–æ–ª–∞–º
        function setupSymbolSearch() {
            const symbolSelect = document.getElementById('symbol');
            if (!symbolSelect) return;

            symbolSelect.addEventListener('focus', function() {
                this.size = 8;
            });

            symbolSelect.addEventListener('blur', function() {
                this.size = 1;
            });

            symbolSelect.addEventListener('keyup', function(e) {
                const searchValue = e.target.value.toLowerCase();
                Array.from(this.options).forEach(option => {
                    option.style.display = option.text.toLowerCase().includes(searchValue) ? '' : 'none';
                });
            });
        }

        // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
        window.loadTopCryptos = loadTopCryptosFromServer;
        window.getCryptoIcon = getCryptoIcon;
        window.formatPrice = formatPrice;
    </script>
<script src="{{ url_for('static', filename='js/i18n.js') }}"></script>
\1
</html>