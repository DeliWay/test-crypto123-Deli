<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–û—à–∏–±–∫–∞ - CryptoAnalyst Pro</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üìà</text></svg>">
    <style>
        .error-container {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: var(--space-lg);
            background: linear-gradient(135deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);
        }

        .error-card {
            background: var(--bg-card);
            border-radius: var(--radius-xl);
            padding: var(--space-xl);
            text-align: center;
            box-shadow: var(--shadow-lg);
            border: 1px solid rgba(255, 255, 255, 0.1);
            max-width: 500px;
            width: 100%;
            animation: errorAppear 0.6s ease-out;
        }

        .error-icon {
            font-size: 4rem;
            color: var(--accent-error);
            margin-bottom: var(--space-lg);
            animation: pulse 2s infinite;
        }

        .error-title {
            font-size: 2rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: var(--space-md);
            background: linear-gradient(135deg, var(--accent-error) 0%, #dc2626 100%);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .error-message {
            font-size: 1.1rem;
            color: var(--text-secondary);
            margin-bottom: var(--space-xl);
            line-height: 1.6;
        }

        .error-code {
            background: var(--bg-tertiary);
            padding: var(--space-sm);
            border-radius: var(--radius-md);
            font-family: 'Courier New', monospace;
            color: var(--text-muted);
            margin: var(--space-lg) 0;
            font-size: 0.9rem;
            word-break: break-all;
        }

        .error-actions {
            display: flex;
            gap: var(--space-md);
            justify-content: center;
            flex-wrap: wrap;
            margin-top: var(--space-xl);
        }

        .error-btn {
            display: inline-flex;
            align-items: center;
            gap: var(--space-sm);
            padding: var(--space-md) var(--space-lg);
            border-radius: var(--radius-md);
            text-decoration: none;
            font-weight: 600;
            transition: all var(--transition-normal);
            min-width: 140px;
            justify-content: center;
        }

        .error-btn-primary {
            background: var(--gradient-primary);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .error-btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-glow);
        }

        .error-btn-secondary {
            background: var(--bg-tertiary);
            color: var(--text-secondary);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .error-btn-secondary:hover {
            background: var(--bg-secondary);
            color: var(--text-primary);
            border-color: var(--accent-primary);
        }

        .error-details {
            background: var(--bg-tertiary);
            border-radius: var(--radius-md);
            padding: var(--space-md);
            margin-top: var(--space-lg);
            text-align: left;
            display: none;
        }

        .error-details summary {
            cursor: pointer;
            font-weight: 600;
            color: var(--text-secondary);
            margin-bottom: var(--space-sm);
        }

        .error-details pre {
            background: var(--bg-secondary);
            padding: var(--space-md);
            border-radius: var(--radius-sm);
            overflow-x: auto;
            color: var(--text-muted);
            font-size: 0.8rem;
            margin: 0;
        }

        .support-info {
            margin-top: var(--space-xl);
            padding-top: var(--space-md);
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: var(--text-muted);
            font-size: 0.9rem;
        }

        @keyframes errorAppear {
            from {
                opacity: 0;
                transform: translateY(30px) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        @media (max-width: 768px) {
            .error-card {
                padding: var(--space-lg);
                margin: var(--space-md);
            }

            .error-title {
                font-size: 1.5rem;
            }

            .error-actions {
                flex-direction: column;
            }

            .error-btn {
                width: 100%;
            }
        }

        .error-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, #ef4444 0%, #dc2626 50%, #b91c1c 100%);
            opacity: 0.1;
            z-index: -1;
            pointer-events: none;
        }
    </style>
</head>
\1
{%include '_lang_header.html'%}

    <div class="error-background"></div>

    <div class="error-container">
        <div class="error-card">
            <div class="error-icon">
                <i class="fas fa-exclamation-triangle"></i>
            </div>

            <h1 class="error-title">–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞</h1>

            <div class="error-message">
                {%if message%}
                    {{message}}
                {%else%}
                    –ü—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –≤–∞—à–µ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ –ø—Ä–æ–∏–∑–æ—à–ª–∞ –Ω–µ–ø—Ä–µ–¥–≤–∏–¥–µ–Ω–Ω–∞—è –æ—à–∏–±–∫–∞.
                {%endif%}
            </div>

            {%if error%}
            <div class="error-code">
                <i class="fas fa-bug"></i>
                –û—à–∏–±–∫–∞: {{error}}
            </div>
            {%endif%}

            <div class="error-actions">
                <a href="/" class="error-btn error-btn-primary">
                    <i class="fas fa-home"></i>
                    –ù–∞ –≥–ª–∞–≤–Ω—É—é
                </a>

                <a href="javascript:location.reload()" class="error-btn error-btn-secondary">
                    <i class="fas fa-redo"></i>
                    –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞
                </a>

                <button onclick="showErrorDetails()" class="error-btn error-btn-secondary">
                    <i class="fas fa-code"></i>
                    –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏
                </button>
            </div>

            <div class="error-details" id="errorDetails">
                <summary>–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</summary>
                <pre>{%if error%}{{error}}{%else%}–ù–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏{%endif%}</pre>
            </div>

            <div class="support-info">
                <p>
                    <i class="fas fa-life-ring"></i>
                    –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è, –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É —Å –∫–æ–¥–æ–º –æ—à–∏–±–∫–∏.
                </p>
                <p>
                    <i class="fas fa-clock"></i>
                    –í—Ä–µ–º—è –æ—à–∏–±–∫–∏: {{now.strftime('%Y-%m-%d %H:%M:%S') if now else '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ'}}
                </p>
            </div>
        </div>
    </div>

    <script>
        function showErrorDetails() {
            const details = document.getElementById('errorDetails');
            details.style.display = details.style.display === 'none' ? 'block' : 'none';
        }

        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–∫—Ä—ã—Ç–∏–µ —á–µ—Ä–µ–∑ 30 —Å–µ–∫—É–Ω–¥ –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É–µ—Ç
        let inactivityTimer = setTimeout(() => {
            window.location.href = '/';
        }, 30000);

        // –°–±—Ä–æ—Å —Ç–∞–π–º–µ—Ä–∞ –ø—Ä–∏ –ª—é–±–æ–º –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–∏
        document.addEventListener('mousemove', resetTimer);
        document.addEventListener('keypress', resetTimer);
        document.addEventListener('click', resetTimer);

        function resetTimer() {
            clearTimeout(inactivityTimer);
            inactivityTimer = setTimeout(() => {
                window.location.href = '/';
            }, 30000);
        }

        // –ü–æ–ø—ã—Ç–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
        setTimeout(() => {
            if (navigator.onLine) {
                const reloadBtn = document.querySelector('[onclick*="reload"]');
                if (reloadBtn) {
                    reloadBtn.innerHTML = '<i class="fas fa-bolt"></i> –ê–≤—Ç–æ–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ...';
                    setTimeout(() => location.reload(), 2000);
                }
            }
        }, 5000);

        // –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ—Ç–∏
        window.addEventListener('online', () => {
            document.body.classList.add('online');
            document.body.classList.remove('offline');
        });

        window.addEventListener('offline', () => {
            document.body.classList.add('offline');
            document.body.classList.remove('online');
        });

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ–º—ã
        document.addEventListener('DOMContentLoaded', function() {
            const savedTheme = localStorage.getItem('cryptoanalyst_theme') || 'dark';
            document.documentElement.setAttribute('data-theme', savedTheme);
        });
    </script>
<script src="{{ url_for('static', filename='js/i18n.js') }}"></script>
\1
</html>