<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–≠–Ω—Ü–∏–∫–ª–æ–ø–µ–¥–∏—è –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ - CryptoAnalyst Pro</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/patterns.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üìà</text></svg>">
    <style>
        /* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º —Å —Ç–µ–º–æ–π */
        .patterns-hero {
            background: linear-gradient(135deg, var(--accent-primary) 0%, var(--accent-primary-dark) 100%);
        }

        [data-theme="light"] .patterns-hero {
            background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
        }

        .pattern-icon {
            background: linear-gradient(135deg, var(--accent-primary) 0%, var(--accent-primary-dark) 100%);
        }

        .pattern-details-btn {
            background: var(--accent-primary);
        }

        .pattern-details-btn:hover {
            background: var(--accent-primary-dark);
        }

        .filter-btn.active,
        .view-btn.active {
            background: var(--accent-primary);
            border-color: var(--accent-primary);
        }
    </style>
</head>

<body>
    <div class="container">
        <!-- –ò—Å–ø–æ–ª—å–∑—É–µ–º –æ–±—â–∏–π header –∏–∑ –ø—Ä–æ–µ–∫—Ç–∞ -->
        {% include '_header.html' %}

        <main class="patterns-main">
            <!-- Hero Section -->
            <section class="patterns-hero">
                <div class="hero-content">
                    <h1><i class="fas fa-shapes"></i> –≠–Ω—Ü–∏–∫–ª–æ–ø–µ–¥–∏—è —Ç–æ—Ä–≥–æ–≤—ã—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤</h1>
                    <p class="hero-description">
                        –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–º –ø–∞—Ç—Ç–µ—Ä–Ω–∞–º —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞.
                        –ò–∑—É—á–∞–π—Ç–µ, —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–π—Ç–µ –∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –¥–ª—è –ø—Ä–∏–Ω—è—Ç–∏—è —Ç–æ—Ä–≥–æ–≤—ã—Ö —Ä–µ—à–µ–Ω–∏–π.
                    </p>
                    <div class="hero-stats">
                        <div class="stat-item">
                            <i class="fas fa-project-diagram"></i>
                            <span>20+ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤</span>
                        </div>
                        <div class="stat-item">
                            <i class="fas fa-chart-line"></i>
                            <span>–†–µ–∞–ª—å–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã</span>
                        </div>
                        <div class="stat-item">
                            <i class="fas fa-lightbulb"></i>
                            <span>–¢–æ—Ä–≥–æ–≤—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏</span>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Search and Filter Section -->
            <section class="patterns-controls">
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" id="pattern-search" placeholder="–ü–æ–∏—Å–∫ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤..." class="search-input">
                </div>

                <div class="filter-buttons">
                    <button class="filter-btn active" data-filter="all">–í—Å–µ</button>
                    <button class="filter-btn" data-filter="–†–∞–∑–≤–æ—Ä–æ—Ç–Ω—ã–µ">–†–∞–∑–≤–æ—Ä–æ—Ç–Ω—ã–µ</button>
                    <button class="filter-btn" data-filter="–ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è">–ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è</button>
                    <button class="filter-btn" data-filter="–°–≤–µ—á–Ω—ã–µ">–°–≤–µ—á–Ω—ã–µ</button>
                </div>

                <div class="view-controls">
                    <button class="view-btn active" data-view="grid">
                        <i class="fas fa-th"></i>
                    </button>
                    <button class="view-btn" data-view="list">
                        <i class="fas fa-list"></i>
                    </button>
                </div>
            </section>

            <!-- Patterns Grid -->
            <section class="patterns-container">
                <div class="patterns-grid" id="patterns-grid">
                    <div class="loading-state">
                        <div class="loading-spinner"></div>
                        <p>–ó–∞–≥—Ä—É–∑–∫–∞ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤...</p>
                    </div>
                </div>
            </section>

            <!-- Pattern Detail Modal -->
            <div class="modal-overlay" id="pattern-modal" style="display: none;">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3 id="modal-title">–ù–∞–∑–≤–∞–Ω–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω–∞</h3>
                        <button class="modal-close" id="modal-close">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <div class="modal-body" id="modal-body">
                        <!-- Content will be loaded dynamically -->
                    </div>
                </div>
            </div>

            <!-- Educational Section -->
            <section class="educational-section">
                <h2><i class="fas fa-graduation-cap"></i> –ö–∞–∫ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –ø–∞—Ç—Ç–µ—Ä–Ω–∞–º–∏</h2>

                <div class="education-grid">
                    <div class="education-card">
                        <i class="fas fa-binoculars"></i>
                        <h4>1. –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ</h4>
                        <p>–ò—â–∏—Ç–µ —á–µ—Ç–∫–∏–µ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞ –≥—Ä–∞—Ñ–∏–∫–µ. –ü–∞—Ç—Ç–µ—Ä–Ω –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Ö–æ—Ä–æ—à–æ –≤–∏–¥–∏–º—ã–º –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–æ–º—É –æ–ø–∏—Å–∞–Ω–∏—é.</p>
                    </div>

                    <div class="education-card">
                        <i class="fas fa-check-circle"></i>
                        <h4>2. –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ</h4>
                        <p>–î–æ–∂–¥–∏—Ç–µ—Å—å –ø–æ–ª–Ω–æ–≥–æ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –ø–∞—Ç—Ç–µ—Ä–Ω–∞. –ò—â–∏—Ç–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –æ–±—ä–µ–º–∞–º–∏ –∏ –¥—Ä—É–≥–∏–º–∏ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞–º–∏.</p>
                    </div>

                    <div class="education-card">
                        <i class="fas fa-arrow-right"></i>
                        <h4>3. –í—Ö–æ–¥</h4>
                        <p>–í—Ö–æ–¥–∏—Ç–µ –≤ —Å–¥–µ–ª–∫—É –ø–æ—Å–ª–µ –ø—Ä–æ–±–æ—è –∫–ª—é—á–µ–≤—ã—Ö —É—Ä–æ–≤–Ω–µ–π. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—Ç–æ–ø-–ª–æ—Å—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–∏—Å–∫–∞–º–∏.</p>
                    </div>

                    <div class="education-card">
                        <i class="fas fa-target"></i>
                        <h4>4. –¶–µ–ª–∏</h4>
                        <p>–£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–π—Ç–µ —Ç–µ–π–∫-–ø—Ä–æ—Ñ–∏—Ç –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏–∑–º–µ—Ä–µ–Ω–∏–π –ø–∞—Ç—Ç–µ—Ä–Ω–∞. –§–∏–∫—Å–∏—Ä—É–π—Ç–µ –ø—Ä–∏–±—ã–ª—å –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ.</p>
                    </div>
                </div>
            </section>

            <!-- Common Mistakes Section -->
            <section class="mistakes-section">
                <h2><i class="fas fa-exclamation-triangle"></i> –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏</h2>

                <div class="mistakes-list">
                    <div class="mistake-item">
                        <i class="fas fa-times-circle"></i>
                        <div class="mistake-content">
                            <h4>–¢–æ—Ä–≥–æ–≤–ª—è –¥–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è</h4>
                            <p>–ù–µ –≤—Ö–æ–¥–∏—Ç–µ –≤ —Å–¥–µ–ª–∫—É –¥–æ –ø–æ–ª–Ω–æ–≥–æ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –ø–∞—Ç—Ç–µ—Ä–Ω–∞. –¢–µ—Ä–ø–µ–Ω–∏–µ - –∫–ª—é—á –∫ —É—Å–ø–µ—Ö—É.</p>
                        </div>
                    </div>

                    <div class="mistake-item">
                        <i class="fas fa-times-circle"></i>
                        <div class="mistake-content">
                            <h4>–ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—ä–µ–º–∞</h4>
                            <p>–û–±—ä–µ–º - –≤–∞–∂–Ω–µ–π—à–∏–π –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—é—â–∏–π —Ñ–∞–∫—Ç–æ—Ä. –ë–µ–∑ –æ–±—ä–µ–º–∞ –ø–∞—Ç—Ç–µ—Ä–Ω –Ω–µ–Ω–∞–¥–µ–∂–µ–Ω.</p>
                        </div>
                    </div>

                    <div class="mistake-item">
                        <i class="fas fa-times-circle"></i>
                        <div class="mistake-content">
                            <h4>–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Å—Ç–æ–ø-–ª–æ—Å—Å–∞</h4>
                            <p>–í—Å–µ–≥–¥–∞ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–π—Ç–µ —Å—Ç–æ–ø-–ª–æ—Å—Å. –ù–∏ –æ–¥–∏–Ω –ø–∞—Ç—Ç–µ—Ä–Ω –Ω–µ –¥–∞–µ—Ç 100% –≥–∞—Ä–∞–Ω—Ç–∏–∏.</p>
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <footer class="patterns-footer">
            <div class="footer-content">
                <p>&copy; 2025 CryptoAnalyst Pro | –≠–Ω—Ü–∏–∫–ª–æ–ø–µ–¥–∏—è –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤</p>
                <p class="educational-note">
                    <i class="fas fa-info-circle"></i>
                    –ú–∞—Ç–µ—Ä–∏–∞–ª—ã –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω—ã –¥–ª—è –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö —Ü–µ–ª–µ–π. –í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–æ–¥–∏—Ç–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –∞–Ω–∞–ª–∏–∑.
                </p>
            </div>
        </footer>
    </div>

    <script>
        // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
        let allPatterns = [];

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ DOM
        document.addEventListener('DOMContentLoaded', function() {
            // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤
            loadPatternsData();

            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–∏—Å–∫–∞ –∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤
            initSearchAndFilters();

            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
            initModal();

            // –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–µ–º—ã - —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å header
            syncThemeWithHeader();
        });

        // –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Ç–µ–º—ã —Å header
        function syncThemeWithHeader() {
            // –°–ª—É—à–∞–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ç–µ–º—ã –∏–∑ header
            const themeToggle = document.querySelector('.theme-toggle-btn');
            if (themeToggle) {
                themeToggle.addEventListener('click', function() {
                    // –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –æ–±–Ω–æ–≤–ª—è–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø–æ—Å–ª–µ —Å–º–µ–Ω—ã —Ç–µ–º—ã
                    setTimeout(() => {
                        document.documentElement.setAttribute('data-theme',
                            document.documentElement.getAttribute('data-theme') === 'dark' ? 'light' : 'dark');
                    }, 100);
                });
            }

            // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–µ–∫—É—â—É—é —Ç–µ–º—É –∏ –ø—Ä–∏–º–µ–Ω—è–µ–º —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ —Å—Ç–∏–ª–∏
            updateThemeStyles();
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∏–ª–µ–π —Ç–µ–º—ã
        function updateThemeStyles() {
            const isDark = document.documentElement.getAttribute('data-theme') === 'dark';

            // –û–±–Ω–æ–≤–ª—è–µ–º –∏–∫–æ–Ω–∫–∏ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–µ–º—ã
            document.querySelectorAll('.stat-item i, .pattern-icon i').forEach(icon => {
                icon.style.color = isDark ? 'white' : 'white'; // –ë–µ–ª—ã–π –¥–ª—è –∫–æ–Ω—Ç—Ä–∞—Å—Ç–∞ –Ω–∞ –≥—Ä–∞–¥–∏–µ–Ω—Ç–µ
            });

            // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–µ–∫—Å—Ç –≤ hero —Å–µ–∫—Ü–∏–∏
            document.querySelectorAll('.hero-content h1, .hero-description, .stat-item').forEach(el => {
                el.style.color = 'white'; // –í—Å–µ–≥–¥–∞ –±–µ–ª—ã–π —Ç–µ–∫—Å—Ç –Ω–∞ –≥—Ä–∞–¥–∏–µ–Ω—Ç–µ
            });
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤
        async function loadPatternsData() {
            try {
                const container = document.getElementById('patterns-grid');
                container.innerHTML = `
                    <div class="loading-state">
                        <div class="loading-spinner"></div>
                        <p>–ó–∞–≥—Ä—É–∑–∫–∞ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤...</p>
                    </div>
                `;

                // –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ñ–∏–∫—Ç–∏–≤–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏
                allPatterns = [
                    {
                        id: 1,
                        name: "–ì–æ–ª–æ–≤–∞ –∏ –ø–ª–µ—á–∏",
                        type: "–†–∞–∑–≤–æ—Ä–æ—Ç–Ω—ã–µ",
                        confidence: "–í—ã—Å–æ–∫–∞—è",
                        description: "–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π —Ä–∞–∑–≤–æ—Ä–æ—Ç–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω, —Å–æ—Å—Ç–æ—è—â–∏–π –∏–∑ —Ç—Ä–µ—Ö –≤–µ—Ä—à–∏–Ω.",
                        signals: {
                            entry: "–ü–æ—Å–ª–µ –ø—Ä–æ–±–æ—è –ª–∏–Ω–∏–∏ —à–µ–∏",
                            stop: "–ó–∞ –ø—Ä–∞–≤—ã–º –ø–ª–µ—á–æ–º",
                            target: "–í—ã—Å–æ—Ç–∞ –ø–∞—Ç—Ç–µ—Ä–Ω–∞ –æ—Ç –ª–∏–Ω–∏–∏ —à–µ–∏"
                        },
                        features: ["–¢—Ä–∏ –≤–µ—Ä—à–∏–Ω—ã", "–°—Ä–µ–¥–Ω—è—è –≤–µ—Ä—à–∏–Ω–∞ –≤—ã—à–µ", "–°–∏–º–º–µ—Ç—Ä–∏—á–Ω—ã–µ –ø–ª–µ—á–∏"],
                        tips: ["–î–æ–∂–¥–∏—Ç–µ—Å—å –ø—Ä–æ–±–æ—è –ª–∏–Ω–∏–∏ —à–µ–∏", "–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –æ–±—ä–µ–º–æ–º –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ"],
                        keyPoints: ["–ß–µ—Ç–∫–∞—è –ª–∏–Ω–∏—è —à–µ–∏", "–û–±—ä–µ–º –Ω–∞ –ø—Ä–æ–±–æ–µ", "–°–∏–º–º–µ—Ç—Ä–∏—è –ø–ª–µ—á"]
                    },
                    // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã (–æ—Å—Ç–∞—é—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)
                    {
                        id: 8,
                        name: "–î–æ–¥–∂–∏",
                        type: "–°–≤–µ—á–Ω—ã–µ",
                        confidence: "–ù–∏–∑–∫–∞—è",
                        description: "–°–≤–µ—á–∞ —Å –æ—á–µ–Ω—å –º–∞–ª–µ–Ω—å–∫–∏–º —Ç–µ–ª–æ–º, —É–∫–∞–∑—ã–≤–∞—é—â–∞—è –Ω–∞ –Ω–µ—Ä–µ—à–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ä—ã–Ω–∫–∞.",
                        signals: {
                            entry: "–ü–æ—Å–ª–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —Å–ª–µ–¥—É—é—â–µ–π —Å–≤–µ—á–æ–π",
                            stop: "–ó–∞ —ç–∫—Å—Ç—Ä–µ–º—É–º–æ–º –¥–æ–¥–∂–∏",
                            target: "1-2 —Ä–∞–∑–º–µ—Ä–∞ –ø–∞—Ç—Ç–µ—Ä–Ω–∞"
                        },
                        features: ["–ú–∞–ª–µ–Ω—å–∫–æ–µ —Ç–µ–ª–æ", "–î–ª–∏–Ω–Ω—ã–µ —Ç–µ–Ω–∏", "–ù–µ—Ä–µ—à–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å"],
                        tips: ["–¢—Ä–µ–±—É–µ—Ç —Å–∏–ª—å–Ω–æ–≥–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è", "–†–∞–±–æ—Ç–∞–µ—Ç –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ"],
                        keyPoints: ["–ú–∞–ª–µ–Ω—å–∫–æ–µ —Ç–µ–ª–æ", "–î–ª–∏–Ω–Ω—ã–µ —Ç–µ–Ω–∏", "–ù–∞ –≤–∞–∂–Ω–æ–º —É—Ä–æ–≤–Ω–µ"]
                    }
                ];

                renderPatterns(allPatterns);

            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤:', error);
                showErrorState('–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤');
            }
        }

        // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤
        function renderPatterns(patterns) {
            const container = document.getElementById('patterns-grid');

            if (!patterns || patterns.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-search"></i>
                        <p>–ü–∞—Ç—Ç–µ—Ä–Ω—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</p>
                        <button class="reset-filters-btn" onclick="resetFilters()">
                            –°–±—Ä–æ—Å–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã
                        </button>
                    </div>
                `;
                return;
            }

            container.innerHTML = patterns.map(pattern => {
                const imageUrl = `/static/images/patterns/${pattern.name.toLowerCase().replace(/\s+/g, '_')}.svg`;

                return `
                    <div class="pattern-card" data-type="${pattern.type}" data-name="${pattern.name.toLowerCase()}">
                        <div class="pattern-header">
                            <div class="pattern-icon">
                                <i class="fas ${getPatternIcon(pattern.name)}"></i>
                            </div>
                            <div class="pattern-title">
                                <h3 class="pattern-name">${pattern.name}</h3>
                                <span class="pattern-type-badge ${getPatternTypeClass(pattern.type)}">
                                    ${pattern.type}
                                </span>
                            </div>
                        </div>

                        <div class="pattern-visual">
                            <img src="${imageUrl}" alt="${pattern.name}"
                                 onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';"
                                 class="pattern-image">
                            <div class="image-fallback" style="display: none;">
                                <i class="fas fa-chart-line"></i>
                                <span>${pattern.name}</span>
                            </div>
                        </div>

                        <div class="pattern-body">
                            <p class="pattern-description">${pattern.description}</p>

                            <div class="pattern-meta">
                                <span class="pattern-reliability ${getConfidenceClass(pattern.confidence)}">
                                    <i class="fas fa-star"></i>
                                    <span class="reliability-text">${pattern.confidence}</span>
                                </span>
                                <span class="pattern-trend">
                                    <i class="fas ${pattern.type === '–ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è' ? 'fa-arrow-right' : 'fa-exchange-alt'}"></i>
                                    <span class="trend-direction">${getTrendDirection(pattern.type)}</span>
                                </span>
                            </div>
                        </div>

                        <div class="pattern-actions">
                            <button class="pattern-details-btn" onclick="showPatternDetails(${pattern.id})">
                                <i class="fas fa-info-circle"></i> –ü–æ–¥—Ä–æ–±–Ω–µ–µ
                            </button>
                        </div>
                    </div>
                `;
            }).join('');

            // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∏–ª–∏ –ø–æ—Å–ª–µ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞
            updateThemeStyles();
        }

                // –ü–æ–ª—É—á–∏—Ç—å –ø–∞—Ç—Ç–µ—Ä–Ω –ø–æ ID
        function getPatternById(id) {
            return allPatterns.find(pattern => pattern.id === id);
        }

        // –ü–æ–ª—É—á–∏—Ç—å –∏–∫–æ–Ω–∫—É –¥–ª—è –ø–∞—Ç—Ç–µ—Ä–Ω–∞
        function getPatternIcon(patternName) {
            const iconMap = {
                '–ì–æ–ª–æ–≤–∞ –∏ –ø–ª–µ—á–∏': 'fa-chart-line',
                '–î–≤–æ–π–Ω–æ–µ –¥–Ω–æ': 'fa-chart-area',
                '–¢—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫': 'fa-play',
                '–§–ª–∞–≥': 'fa-flag',
                '–í—ã–º–ø–µ–ª': 'fa-chevron-down',
                '–ö–ª–∏–Ω': 'fa-angle-double-up',
                '–ß–∞—à–∫–∞ —Å —Ä—É—á–∫–æ–π': 'fa-coffee',
                '–ë—Ä–∏–ª–ª–∏–∞–Ω—Ç': 'fa-gem',
                '–¢—Ä–æ–π–Ω–∞—è –≤–µ—Ä—à–∏–Ω–∞': 'fa-chart-bar',
                '–ú–æ–ª–æ—Ç': 'fa-gavel',
                '–ü–æ–≥–ª–æ—â–µ–Ω–∏–µ': 'fa-exchange-alt',
                '–î–æ–¥–∂–∏': 'fa-balance-scale',
                'default': 'fa-chart-line'
            };

            return iconMap[patternName] || iconMap.default;
        }

        // –ü–æ–ª—É—á–∏—Ç—å –∫–ª–∞—Å—Å –¥–ª—è —Ç–∏–ø–∞ –ø–∞—Ç—Ç–µ—Ä–Ω–∞
        function getPatternTypeClass(type) {
            const classMap = {
                '–†–∞–∑–≤–æ—Ä–æ—Ç–Ω—ã–µ': 'reversal',
                '–ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è': 'continuation',
                '–°–≤–µ—á–Ω—ã–µ': 'candlestick'
            };
            return classMap[type] || 'default';
        }

        // –ü–æ–ª—É—á–∏—Ç—å –∫–ª–∞—Å—Å –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏
        function getConfidenceClass(confidence) {
            const classMap = {
                '–í—ã—Å–æ–∫–∞—è': 'high',
                '–°—Ä–µ–¥–Ω—è—è': 'medium',
                '–ù–∏–∑–∫–∞—è': 'low'
            };
            return classMap[confidence] || 'unknown';
        }

        // –ü–æ–ª—É—á–∏—Ç—å –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç—Ä–µ–Ω–¥–∞
        function getTrendDirection(type) {
            return type === '–ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è' ? '–ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ' : '–†–∞–∑–≤–æ—Ä–æ—Ç';
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–∏—Å–∫–∞ –∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤
        function initSearchAndFilters() {
            const searchInput = document.getElementById('pattern-search');
            const filterButtons = document.querySelectorAll('.filter-btn');
            const viewButtons = document.querySelectorAll('.view-btn');

            // –ü–æ–∏—Å–∫
            searchInput.addEventListener('input', debounce(function(e) {
                filterPatterns();
            }, 300));

            // –§–∏–ª—å—Ç—Ä—ã
            filterButtons.forEach(btn => {
                btn.addEventListener('click', function() {
                    filterButtons.forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    filterPatterns();
                });
            });

            // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∏–¥–∞
            viewButtons.forEach(btn => {
                btn.addEventListener('click', function() {
                    viewButtons.forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    const viewType = this.getAttribute('data-view');
                    const grid = document.getElementById('patterns-grid');
                    if (viewType === 'list') {
                        grid.classList.add('list-view');
                    } else {
                        grid.classList.remove('list-view');
                    }
                });
            });
        }

        // –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤
        function filterPatterns() {
            const searchTerm = document.getElementById('pattern-search').value.toLowerCase();
            const activeFilter = document.querySelector('.filter-btn.active').getAttribute('data-filter');

            const filtered = allPatterns.filter(pattern => {
                const matchesSearch = pattern.name.toLowerCase().includes(searchTerm) ||
                                    pattern.description.toLowerCase().includes(searchTerm) ||
                                    pattern.type.toLowerCase().includes(searchTerm);

                const matchesFilter = activeFilter === 'all' || pattern.type === activeFilter;

                return matchesSearch && matchesFilter;
            });

            renderPatterns(filtered);
        }

        // –°–±—Ä–æ—Å —Ñ–∏–ª—å—Ç—Ä–æ–≤
        function resetFilters() {
            document.getElementById('pattern-search').value = '';
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.getAttribute('data-filter') === 'all') {
                    btn.classList.add('active');
                }
            });
            renderPatterns(allPatterns);
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
        function initModal() {
            const modal = document.getElementById('pattern-modal');
            const closeBtn = document.getElementById('modal-close');

            closeBtn.addEventListener('click', hidePatternDetails);

            modal.addEventListener('click', function(e) {
                if (e.target === modal) {
                    hidePatternDetails();
                }
            });

            // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ ESC
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    hidePatternDetails();
                }
            });
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å –¥–µ—Ç–∞–ª–∏ –ø–∞—Ç—Ç–µ—Ä–Ω–∞
        function showPatternDetails(patternId) {
            const pattern = getPatternById(patternId);
            if (!pattern) return;

            const modal = document.getElementById('pattern-modal');
            const title = document.getElementById('modal-title');
            const body = document.getElementById('modal-body');

            title.textContent = pattern.name;

            body.innerHTML = `
                <div class="pattern-detail">
                    <div class="detail-header">
                        <span class="pattern-type-badge ${getPatternTypeClass(pattern.type)}">
                            ${pattern.type}
                        </span>
                        <span class="pattern-reliability ${getConfidenceClass(pattern.confidence)}">
                            <i class="fas fa-star"></i>
                            –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å: ${pattern.confidence}
                        </span>
                    </div>

                    <div class="detail-description">
                        <h4>–û–ø–∏—Å–∞–Ω–∏–µ</h4>
                        <p>${pattern.description}</p>
                    </div>

                    <div class="detail-signals">
                        <h4>–¢–æ—Ä–≥–æ–≤—ã–µ —Å–∏–≥–Ω–∞–ª—ã</h4>
                        <div class="signal-grid">
                            <div class="signal-item">
                                <i class="fas fa-play"></i>
                                <strong>–í—Ö–æ–¥:</strong> ${pattern.signals.entry}
                            </div>
                            <div class="signal-item">
                                <i class="fas fa-shield-alt"></i>
                                <strong>–°—Ç–æ–ø-–ª–æ—Å—Å:</strong> ${pattern.signals.stop}
                            </div>
                            <div class="signal-item">
                                <i class="fas fa-bullseye"></i>
                                <strong>–¶–µ–ª—å:</strong> ${pattern.signals.target}
                            </div>
                        </div>
                    </div>

                    <div class="detail-features">
                        <h4>–ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏</h4>
                        <ul>
                            ${pattern.features.map(feature => `<li>${feature}</li>`).join('')}
                        </ul>
                    </div>

                    <div class="detail-tips">
                        <h4>–¢–æ—Ä–≥–æ–≤—ã–µ —Å–æ–≤–µ—Ç—ã</h4>
                        <div class="tips-list">
                            ${pattern.tips.map(tip => `
                                <div class="tip-item">
                                    <i class="fas fa-lightbulb"></i>
                                    <span>${tip}</span>
                                </div>
                            `).join('')}
                        </div>
                    </div>

                    <div class="detail-key-points">
                        <h4>–í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã</h4>
                        <div class="key-points-grid">
                            ${pattern.keyPoints.map(point => `
                                <div class="key-point-item">
                                    <i class="fas fa-check-circle"></i>
                                    <span>${point}</span>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                </div>
            `;

            modal.style.display = 'flex';
            document.body.style.overflow = 'hidden';
        }

        // –°–∫—Ä—ã—Ç—å –¥–µ—Ç–∞–ª–∏ –ø–∞—Ç—Ç–µ—Ä–Ω–∞
        function hidePatternDetails() {
            const modal = document.getElementById('pattern-modal');
            modal.style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ—à–∏–±–∫–∏
        function showErrorState(message) {
            const container = document.getElementById('patterns-grid');
            container.innerHTML = `
                <div class="error-state">
                    <i class="fas fa-exclamation-triangle"></i>
                    <p>${message}</p>
                    <button class="retry-btn" onclick="loadPatternsData()">
                        <i class="fas fa-redo"></i> –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞
                    </button>
                </div>
            `;
        }

        // Debounce —Ñ—É–Ω–∫—Ü–∏—è
        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }
    </script>
</body>
</html>